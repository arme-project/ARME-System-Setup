This repository has an interactive page which you can view the instructions on: https://arme-project.github.io/ARME-System-Setup/

---

# WIP - NOT FINAL OR FULLY CORRECT YET
- **TODO:** Create screenshots where necessary.
- **TODO:** Expand instructions for connecting headset via USB link.
- **TODO:** Expand on MAX/MSP instructions for installing the included Antescofo package. 
- **TODO:** Edit the MAX/MSP patch with actual presentation UI, and update instructions. 

---

# 🧰 Full ARME-Project Setup Guide
This repository contains three interconnected projects required to **DEMO** or **DEVELOP** the system. 

1. 🎛️ [Adaptive Metronome JUCE Plugin](https://github.com/arme-project/AdaptiveMetronome/tree/windows-standalone) – Standalone Plugin Executable.
2. 🎚️ [score-follower in MAX/MSP](https://github.com/arme-project/score-follower) – Score Following and Audio Playback
3. 🥽 [Magic Leap 2 project in Unity](https://github.com/arme-project/ARME-XR-Integration-ML2) – AR visual interface and display

Each project is organized into **DEMO** (Instructions to setup a running demo) and **DEVELOPMENT** (Instructions for setting up full development environment)

---

## 1. 🎛️ JUCE Plugin

### 🔹 DEMO

1. Clone the repo above. 
1. Run the included executable at `..\BuildOutput\AdaptiveMetronome.exe`.
1. Load the provided `Haydn2.mid` and set player parameters. 
1. You should see the following interface: 
   - **TODO:** Get Screenshot

### 🔸 DEVELOPMENT

1. Clone the repo as above. Please note that the full system currently uses the `windows-standalone` branch of the repo.
1. Clone [JUCE v7.0.9](https://github.com/juce-framework/JUCE/releases/tag/7.0.9).
1. Navigate to `..\JUCE\extras\Projucer\Builds\VisualStudio2022`
1. Build `Projucer.sln` using **Visual Studio 2022** or **MSBuild tools**.
1. Load the included `AdaptiveMetronome.jucer` file in **Projucer**.
1. You should see something like the following interface:  
   - **TODO:** Get Screenshot
1. Press export to generate the **VS2022** solution files and navigate to: `..\AdaptiveMetronome\Builds\VisualStudio2022`

1. Use **VS2022** or **MSBuild** to build the generated `AdaptiveMetronome.sln` solution. 

---

## 2. 🎚️ Max/MSP Patch

### 🔹 DEMO

1. Download and install [MAX 9.0](https://cycling74.com/downloads).
1. Clone the **score-follower** repo.
1. Extract Antescofo package to a folder that MAX/MSP checks for external packages (**Expand these instructions**). 
1. Open the `score-follower.maxpat` patcher.
1. This should load the following interface:
  ![JUCE Plugin UI](images/juce_ui.png)
1. Setup the required audio files in each Audio Player.
1. Choose which method of Onsets will be sent to the AdaptiveMetronome plugin. The current options are:
   - Simulated onsets based on a metronome (an Onset is generated automatically every 0.5s, for example).
   - Generate enerate onsets when the user taps the Spacebar (this can also be setup to use a connected MIDI device).
   - Onsets are generated by Antescofo (a score must be loaded into Antescofo. A pre-recorded audio file should play into Antescofo, or Audio should be routed directly from a mic input for full real-time use).
1. Use the **[Reset]** and **[Play]** buttons in either **MAX** or the **Adaptive Metronome** plugin to begin and reset playback. 

### 🔸 DEVELOPMENT

1. Download and clone project as above. Please note that for development, a **MAX/MSP** license is required to save edited patches. 

---

## 3. 🥽 Unity + Magic Leap 2 Project

### 🔹 DEMO

1. The **MAX/MSP** Score follower must be running for the headset to connect to. 
1. Install Magic Leap Hub 3 (download from [Magic Leap Hub 3](https://ml2-developer.magicleap.com/downloads)).
1. Connect **Magic Leap 2** to **PC** via a **USB** cable and select **USB Tethering** as connection style when prompted inside the headset. Or this can be changed afterwards in `Settings -> Connected Devices -> USB`.
   <div align="center">
      <img src="InstructionScreenshots\Set-USB-Tethering-Cropped.jpg" height="300">
   </div>
1. Load the **ARME** app on the headset, and click on the **Connections** tab.
1. Identify and select the connection that corresponds to the **USB** link between **PC** and headset. This should be called, e.g. `Ethernet - 192.168.42.129 - usb0`. The exact IP address can vary. 
   <div align="center">
      <img src="InstructionScreenshots\Headset-Connection-Settings-In-App-Cropped.jpg" height="300">
   </div>
1. Clicking **Connect** should start the automatic connection process with the **MAX/MSP** score follower. If this works the menu should change to **Connected**. If this does not work, it will be stuck on **... Connecting** indefinitely. 
1. Once connected, the headset will respond to reset and play commands automatically. 


### 🔸 DEVELOPMENT

1. Download and set-up **Magic Leab Hub 3** as above.  
Clone the repo and install **Unity 6000.0.14f1** via **Unity Hub**. Make sure to include the **Android Build Tools**. 
2. In the **Magic Leab Hub 3** **Packages** manager, install:
   - **ML C SDK 1.4**  
   - **Unity Package 1.12.1** - *This is now **Optional*** as this is included in the **Unity** project under the `..\Packages` folder instead.
3. In the **Magic Leab Hub 3** **Settings** go to **Use custom ADB** and browse to the **adb.exe** file included with the Unity installation. This is typically installed at: `{ProgramFiles}\Unity\Hub\Editor\6000.0.14f1\Editor\Data\PlaybackEngines\AndroidPlayer\SDK\platform-tools\adb.exe`
4. Open the Unity project and load the `MainTestScene` scene to make changes.
5. Under `Edit -> Preferences -> External Tools -> Magic Leap` menu, specify the path to the installed `MLSDK` folder. 
6. The `..\Settings\BuildProfiles` folder includes a `MagicLeap2FromWindows` build profile. This can be built to an `.apk`, or deployed directly to a connected **ML2** Device from **Unity**.

---



## 📸 Screenshot Tips

To add a screenshot at any step:

```markdown
![Alt Text](images/screenshot_filename.png)
```

Make sure your screenshots are stored in a folder like `/images/` and committed with your project.
